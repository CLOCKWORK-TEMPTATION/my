# Gemini AGENTS Instructions for Enhanced Architecture Analyzer (Go Migration)

This project is a Go implementation of a Python-based **Enhanced Architecture Analyzer**. The primary goal is to analyze session details, using a multi-provider Generative AI strategy, and produce a structured architectural analysis.

## 1. Project Context & "Big Picture"

*   **Core Task:** Port the Python prototype (`المشروع/enhanced_analyzer (1).py`) to a Go application.
*   **Data Flow:**
    1.  Input: Raw text from `المشروع/Session details.txt`.
    2.  Processing: The Go application will parse this text.
    3.  Analysis: Use the Google Generative AI SDK (`google.golang.org/genai`) to send the text to a generative model.
    4.  Output: Generate a structured markdown report (`System_Architecture_Analysis.md`).
*   **Generative Models Strategy:** This project employs a sophisticated, multi-model strategy defined in `AGENTS.md`. Key models include:
    *   **Primary:** `gemini-3-pro` for core analysis.
    *   **Reasoning:** `gemini-3-deep-think` for complex failure analysis.
    *   **Speed:** `gemini-3-flash` for interactive tasks.
    *   **External:** `gpt-5.2`, `claude-4-5-sonnet`.

## 2. Essential Developer Workflows

*   **Dependencies:** Use `go get <package>` to add new dependencies and `go mod tidy` to sync.
*   **Running the App:** Execute `go run main.go`.
*   **Environment:**
    *   Create a `.env` file in the root.
    *   **Required:** `GEMINI_API_KEY=your_key_here`.
    *   Optional keys for OpenAI, Anthropic, etc. are also supported.

## 3. Project-Specific Patterns & Conventions

*   **Prompt Engineering:**
    *   Prompts are defined as constants.
    *   Explicitly request **JSON output** from the models to match Go structs, as the Go SDK does not have a "response_model" feature.
    *   Example: Append `"Respond with valid JSON matching this schema: ..."` to your prompts.
*   **Structured Output:**
    *   Go `structs` with JSON tags are used to represent the desired output from the AI models. These are the Go equivalent of the Pydantic models in the Python prototype.
*   **Error Handling:**
    *   Use `log.Fatal` for critical startup errors (e.g., loading API keys).
    *   Use `pterm.Error` for runtime errors during analysis.

## 4. Integration Points & Key Files

*   **`main.go`**: The entry point. Will contain the main application logic and model selection.
*   **`AGENTS.md`**: The source of truth for the model strategy and project conventions. **Refer to this file often.**
*   **`المشروع/enhanced_analyzer (1).py`**: The Python reference implementation. Use this to understand the original logic.
*   **`المشروع/Session details.txt`**: The primary input data file.

## 5. Migration Strategy (Python -> Go)

*   **Models:** Convert Python `pydantic.BaseModel` from the reference implementation into Go `structs` with JSON tags.
*   **Analysis Logic:** Port the methods from the `EnhancedArchitecturalAnalystAgent` class in the Python file to Go functions.
*   **CLI Output:** Replace Python's `rich` library calls with `pterm` for formatted output.

Your primary task is to facilitate this migration from Python to Go, following the patterns and conventions outlined here.
